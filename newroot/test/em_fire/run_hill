# for regression testing to check if the results are the same on various number of processors
# build with configure -d and SM+DM
cd hill
rm -rf mach
hostname >> mach
hostname >> mach
hostname >> mach
hostname >> mach
hostname >> mach
hostname >> mach
echo | mpirun_rsh -np 1 -hostfile mach OMP_NUM_THREADS=1 ideal.exe 
cat rsl.out.0000
cd ..
pwd
# copy hill to hill-1x1 etc.
rm -rf hill-*
# source this
# rm -f hill-?x?/{rsl.*,*_*.txt wrfo*,wrfr*}  # to grab for cleanup
( cp -a hill hill-1x1; cd hill-1x1; rm -rf rsl.* wrfo* wrfr*; nohup mpirun_rsh -np 1 -hostfile mach OMP_NUM_THREADS=1 wrf.exe < /dev/null >& wrf.log ) &
( cp -a hill hill-1x6; cd hill-1x6; rm -rf rsl.* wrfo* wrfr*; nohup mpirun_rsh -np 1 -hostfile mach OMP_NUM_THREADS=6 wrf.exe < /dev/null >& wrf.log ) &
( cp -a hill hill-6x1; cd hill-6x1; rm -rf rsl.* wrfo* wrfr*; nohup mpirun_rsh -np 6 -hostfile mach OMP_NUM_THREADS=1 wrf.exe < /dev/null >& wrf.log ) & 
( cp -a hill hill-3x2; cd hill-3x2; rm -rf rsl.* wrfo* wrfr*; nohup mpirun_rsh -np 3 -hostfile mach OMP_NUM_THREADS=2 wrf.exe < /dev/null >& wrf.log ) & 
( cp -a hill hill-2x3; cd hill-2x3; rm -rf rsl.* wrfo* wrfr*; nohup mpirun_rsh -np 2 -hostfile mach OMP_NUM_THREADS=3 wrf.exe < /dev/null >& wrf.log ) & 
( cp -a hill hill-2x1; cd hill-2x1; rm -rf rsl.* wrfo* wrfr*; nohup mpirun_rsh -np 2 -hostfile mach OMP_NUM_THREADS=1 wrf.exe < /dev/null >& wrf.log ) & 
( cp -a hill hill-1x2; cd hill-1x2; rm -rf rsl.* wrfo* wrfr*; nohup mpirun_rsh -np 1 -hostfile mach OMP_NUM_THREADS=2 wrf.exe < /dev/null >& wrf.log ) & 
